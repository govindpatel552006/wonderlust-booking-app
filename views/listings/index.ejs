<% layout("/layouts/boilerplate") %>
<title>All Listings</title>

<body class="bg-gray-900 text-white">
<style>
  /* Optional: for smooth scroll & hiding scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  #switch{
    margin-left: 80px;
  }
  .tax-info{
    display: none;
  }

  /* Responsive: allow wrapping on small screens and adjust switch */
  .filtersi { /* preserve original behavior but allow wrap on very small screens */ }

  /* Toggle visual styling (keeps checkbox behavior) */
  #switch .form-check-input{
    -webkit-appearance: none;
    appearance: none;
    width: 44px;
    height: 24px;
    background: #1f2937; /* gray-800 */
    border-radius: 9999px;
    position: relative;
    outline: none;
    cursor: pointer;
    transition: background .18s ease-in-out;
    vertical-align: middle;
  }
  #switch .form-check-input:after{
    content: "";
    width: 18px;
    height: 18px;
    background: #fff;
    border-radius: 9999px;
    position: absolute;
    top: 3px;
    left: 3px;
    transition: transform .18s ease-in-out;
    box-shadow: 0 1px 2px rgba(0,0,0,0.4);
  }
  #switch .form-check-input:checked{
    background: #10b981; /* green-400 */
  }
  #switch .form-check-input:checked:after{
    transform: translateX(20px);
  }

  /* On small screens: remove long label text and center the switch */
  @media (max-width: 768px) {
    #switch {
      margin-left: 0;
      width: auto;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }
    /* hide long label text, show short 'GST' label instead */
    #switch .form-check-label {
      display: none;
    }
    #switch .short-gst {
      display: inline-block;
      font-size: 12px;
      color: #9ca3af; /* text-gray-400 */
      font-weight: 500;
    }
  }

  /* On larger screens, hide the short label */
  @media (min-width: 769px) {
    #switch .short-gst { display: none; }
  }
</style>
 
<div class="filtersi flex overflow-x-auto no-scrollbar gap-6 py-3 px-4 border-b border-gray-700 bg-gray-900 sticky top-0 z-10">

  
  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-fire text-xl mb-1"></i>
    <p class="text-xs font-medium">Trending</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-bed text-xl mb-1"></i>
    <p class="text-xs font-medium">Rooms</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-mountain-city text-xl mb-1"></i>
    <p class="text-xs font-medium">Mountains</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-brands fa-fort-awesome text-xl mb-1"></i>
    <p class="text-xs font-medium">Heritage</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-water-ladder text-xl mb-1"></i>
    <p class="text-xs font-medium">Pool</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-tents text-xl mb-1"></i>
    <p class="text-xs font-medium">Camping</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-tractor text-xl mb-1"></i>
    <p class="text-xs font-medium">Farmhouse</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-snowflake text-xl mb-1"></i>
    <p class="text-xs font-medium">Arctic</p>
  </div>

  <!-- ---- ADDED 4 ICONS (Airbnb-style) ---- -->
  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-umbrella-beach text-xl mb-1"></i>
    <p class="text-xs font-medium">Beach</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-sailboat text-xl mb-1"></i>
    <p class="text-xs font-medium">Boat</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-tree text-xl mb-1"></i>
    <p class="text-xs font-medium">Treehouse</p>
  </div>

  <div class="flex flex-col items-center justify-center min-w-[80px] cursor-pointer text-gray-400 hover:text-green-400 transition">
    <i class="fa-solid fa-house-chimney text-xl mb-1"></i>
    <p class="text-xs font-medium">Cabin</p>
  </div>
  <!-- ---- end added icons ---- -->

<div   id="switch"  class="form-check-reverse form-switch mt-1">
  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
  <label class="form-check-label" for="flexSwitchCheckDefault">display total after taxes</label>
  <span class="short-gst">GST</span>
</div>
</div>

<div class="container mx-auto px-4 py-5">
</div>


    <h1 class="text-4xl font-bold text-center mb-5 text-green-400">
      Explore All Listings
    </h1>

    <!-- Listings Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">

      <% allListings.forEach(listing => { %>
        <a href="/listings/<%= listing._id %>" 
           class="block bg-gray-800 rounded-2xl overflow-hidden shadow-lg hover:shadow-green-500/30 transition transform hover:-translate-y-2 duration-300 flex flex-col h-[370px]">

          <!-- Image -->
          <img src="<%= listing.image.url %>" alt="<%= listing.title %>" 
               class="h-40 w-full object-cover">

          <!-- Content -->
          <div class="p-3 flex flex-col justify-between flex-grow">
            <div>
              <h2 class="text-xl font-bold mb-1 text-green-400 line-clamp-1">
                <%= listing.title %>
              </h2>

              <p class="text-gray-300 text-sm line-clamp-2">
                <%= listing.description %>
              </p>
            </div>

            <div class="mt-2">
              <p class="text-lg font-semibold text-white">â‚¹<%= listing.price %></p>
              <i class="tax-info">&nbsp; +18% GST</i>
              <p class="text-xs text-gray-400"><%= listing.location %>, <%= listing.country %></p>
            </div>
          </div>
        </a>
      <% }) %>

    </div>
  </div>
</body>

<script>
  const taxswitch = document.getElementById("flexSwitchCheckDefault");

  taxswitch.addEventListener("click", () => {
    let taxinfo=document.getElementsByClassName("tax-info")
    for(info of taxinfo){
        if(info.style.display!="inline"){
            info.style.display="inline"
        }
        else{
             info.style.display="none"
        }
    }

  });
</script>
